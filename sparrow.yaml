tasks:
  -
    name: main
    default: true
    language: Bash
    code: |
        cd source/
        which raku
        raku --version
        zef --version
        #zef install --/test --deps-only --to=home .
        #zef test . 
    
    depends:
      -
        name: rakudo-jvm
  -
    name: rakudo-jvm
    language: Bash
    config:
        version: 2022.12
    code: |
        set -e
        version=$(config version)
        curl -sf https://rakubrew.org/perl/rakubrew -o rakubrew
        sudo mv rakubrew /usr/local/bin
        sudo chmod a+x /usr/local/bin/rakubrew
        rakubrew mode shim
        rakubrew download jvm-$version
        rakubrew switch jvm-$version
